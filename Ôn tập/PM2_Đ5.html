<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./0_FileChung/Reset.css">
    <link rel="stylesheet" href="./0_FileChung/all.min.css">
    <link rel="stylesheet" href="./0_FileChung/bootstrap.min.css">
    <style>
        body {
            background-color: #555;
        }

        .app {
            background: linear-gradient(to top, #d9ddeb, #fcfcfd);
            width: 400px;
            margin: 10vh auto;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid#ccc;
        }

        #formSignUp {
            width: 100%;
        }

        .form-contact {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 10px;
            width: 100%;
        }

        #firstName,
        #lastName {
            width: 100%;
        }

        input[type="text"] {
            width: 100%;
        }

        .form-message {
            color: red;
            background-color: rgb(249, 213, 213);
            font-style: italic;
            margin: 2px 0 0 0;
            font-size: 10px;
            padding: 0 10px;
            width: fit-content;
            border-radius: 5px;
        }

        .DateOfBirth>div {
            display: flex;
        }

        select {
            margin-right: 2px;
            padding: 0 10px;
            font-size: 12px;
        }

        a {
            color: rgb(7, 7, 184);
            text-decoration: none;
            font-size: 10px;
        }

        p {
            font-size: 10px;
            color: #555;
        }


        .sex>div:first-child {
            display: flex;
            width: 100px;
            justify-content: space-between;
        }

        #btnSignUp {
            width: 200px;
            padding: 3px 0;
            border: 0;
            border-radius: 5px;
            color: #fff;
            background-color: green;
            font-weight: 700;
        }
    </style>
</head>

<body>
    <!-- <img src="./Đ4.png" alt=""> -->
    <div class="app">
        <h1 class="Title">Đăng ký</h1>
        <h6>Miễn phí và sẽ luôn như vậy.</h6>
        <form action="" class="#formSignUp">
            <div class="form-contact">
                <div class="form-group">
                    <input type="text" id="firstName" placeholder="Họ">
                    <div class="form-message"></div>
                </div>
                <div class="form-group">
                    <input type="text" id="lastName" placeholder="Tên">
                    <div class="form-message"></div>
                </div>
            </div>
            <div class="form-group">
                <input type="text" id="acc" placeholder="Email hoặc số di động">
                <div class="form-message"></div>
            </div>
            <div class="form-group">
                <input type="text" id="reAcc" placeholder="Nhập lại email hoặc số di động">
                <div class="form-message"></div>
            </div>
            <div class="form-group">
                <input type="text" id="password" placeholder="Mật khẩu mới">
                <div class="form-message"></div>
            </div>
            <div class="form-group DateOfBirth">
                <h6>Ngày sinh</h6>
                <div>
                    <select name="day" id="day">
                        <option value="">Ngày</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select name="month" id="month">
                        <option value="">Tháng</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select>
                    <select name="year" id="year">
                        <option value="">Năm</option>
                        <option value="1995">1995</option>
                        <option value="1996">1996</option>
                        <option value="1997">1997</option>
                        <option value="1998">1998</option>
                        <option value="1999">1999</option>
                        <option value="2000">2000</option>
                        <option value="2001">2001</option>
                        <option value="2002">2002</option>
                        <option value="2003">2003</option>
                        <option value="2004">2004</option>
                        <option value="2005">2005</option>
                        <option value="2006">2006</option>
                        <option value="2007">2007</option>
                        <option value="2008">2008</option>
                    </select>
                    <a href="">Tại sao tôi cần cung cấp ngày sinh của mình?</a>
                </div>
                <div class="form-message form-message_DOB"></div>
            </div>
            <div class="form-group sex">
                <div>
                    <div class="sex_male">
                        <input type="radio" name="sex" id="female">
                        <label for="female">Nữ</label>
                    </div>
                    <div class="sex_female">
                        <input type="radio" name="sex" id="male">
                        <label for="male">Nam</label>
                    </div>
                </div>
                <div class="form-message form-message_Sex"></div>
            </div>
            <p>Bằng cách nhấp vào Đăng ký, bạn đồng ý với <a href="">Các điều khoản</a> của chúng tôi và rằng bạn đã đọc
                <a href="">Chính sách dữ liệu</a> của chúng tôi, bao gồm <a href="">Sử dụng cookie.</a>
            </p>
            <button type="submit" id="btnSignUp">Đăng ký</button>
        </form>
    </div>

    <script src="./0_FileChung/jquery-3.7.0.min.js"></script>
    <script>
        function check(ID, Regex, message = '') {
            if ($(ID).val() === "") {
                $(ID).next('.form-message').text('Vui lòng nhập trường này').show();
                return false;
            } else if (Regex !== '') {
                if (!Regex.test($(ID).val())) {
                    $(ID).next('.form-message').text(message).show();
                    return false;
                }
            }
            $(ID).next(".form-message").hide();
            return true;
        }

        function checkReAcc(a, b) {
            if ($(b).val() === '') {
                $(b).next('.form-message').text('Vui lòng nhập trường này').show();
                return false;
            } else if ($(a).val() !== $(b).val()) {
                $(b).next('.form-message').text('Vui lòng nhập lại email hoặc số điện thoại đã nhập ở trên!').show();
                return false;
            }
            $(b).next('.form-message').text('').show();
            return true;
        }

        function checkDOB(d, m, y) {
            var day = $(d).val();
            var month = $(m).val();
            var year = $(y).val();

            // Kiểm tra xem ngày, tháng, năm có được chọn hay không
            if (day === "" || month === "" || year === "") {
                $('.form-message_DOB').text("Vui lòng chọn ngày sinh đầy đủ").show();
                return false;
            }
            // Kiểm tra số ngày trong tháng
            var daysInMonth;
            if (month == 4 || month == 6 || month == 9 || month == 11) {
                daysInMonth = 30;
            } else if (month == 2) {
                // Kiểm tra năm nhuận
                if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) {
                    daysInMonth = 29;
                } else {
                    daysInMonth = 28;
                }
            } else {
                daysInMonth = 31;
            }

            if (daysInMonth < Number(day)) {
                $('.form-message_DOB').text(`Tháng ${month} năm ${year} chỉ có ${daysInMonth} ngày!`).show();
                return false;
            }
            $('.form-message_DOB').text("").show();
            return true;
        }

        $(document).ready(function () {
            $('#firstName').on("input", () => { check("#firstName", /^[\p{L}\s]+$/u, 'Tên chỉ được chứa ký tự') });
            $('#lastName').on("input", () => { check("#lastName", /^[\p{L}\s]+$/u, 'Tên chỉ được chứa ký tự') });
            $('#acc').on("blur", () => { check("#acc", /^([^\s@]+@[^\s@]+\.[^\s@])|(0[1-9]\d{8,10})$/, 'Email hoặc số điện thoại không hợp lệ') });
            $('#reAcc').on("input", () => { checkReAcc('#acc', '#reAcc') });
            $('#password').on("input", () => { check('#password', /^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()])[\w!@#$%^&*()]{8,}$/, 'Vui lòng nhập lại mật khẩu có ít nhất 8 ký tự, có ký tự viết hoa và ký tự đặc biệt!') });



            $("#btnSignUp").click(function (e) {
                e.preventDefault();
                const isFN = check("#firstName", /^[\p{L}\s]+$/u, 'Tên chỉ được chứa ký tự');
                const isLN = check("#lastName", /^[\p{L}\s]+$/u, 'Tên chỉ được chứa ký tự');
                const isAcc = check("#acc", /^([^\s@]+@[^\s@]+\.[^\s@])|(0[1-9]\d{8,10})$/, 'Email hoặc số điện thoại không hợp lệ');
                const isReAcc = checkReAcc('#acc', '#reAcc');
                const isPW = check('#password', /^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()])[\w!@#$%^&*()]{8,}$/, 'Vui lòng nhập lại mật khẩu có ít nhất 8 ký tự, có ký tự viết hoa và ký tự đặc biệt!');
                const isDOB = checkDOB('#day', '#month', '#year');

                var isSex = true;
                var selectedGender = $("input[name='sex']:checked").val();
                if (!selectedGender) {
                    $(".form-message_Sex").text("Vui lòng chọn giới tính").show();
                    isSex = false;
                } else {
                    $(".form-message_Sex").text("").hide();
                }

                if (isAcc && isDOB && isFN && isLN && isPW && isAcc && isReAcc && isSex) {
                    $('#firstName').val('');
                    $('#lastName').val('');
                    $('#acc').val('');
                    $('#reAcc').val('');
                    $('#password').val('');
                    $('#day').val('');
                    $('#month').val('');
                    $('#year').val('');
                    $('input[name="sex"]').prop('checked', false);

                    alert("Bạn đã đăng ký thành công");
                }
            });
        });
    </script>
</body>

</html>